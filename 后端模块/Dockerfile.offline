# 完全离线构建 - 使用本地编译
FROM scratch

WORKDIR /app

# 复制本地编译的二进制文件
COPY taskmanager.exe /app/

# 设置环境变量
ENV DB_HOST=localhost \
    DB_PORT=3306 \
    DB_USER=root \
    DB_PASSWORD=root \
    DB_NAME=task_manager \
    SERVER_PORT=8080 \
    JWT_KEY=your_secret_key_for_jwt_please_change_in_production \
    MINIO_ENDPOINT=localhost:9000 \
    MINIO_ACCESS_KEY=admin \
    MINIO_SECRET_KEY=12345678 \
    MINIO_BUCKET=taskmanager

# 暴露端口
EXPOSE 8080

# 启动应用
CMD ["/app/taskmanager.exe"]
